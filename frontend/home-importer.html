<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Home | Transio</title>
    <link
      id="dynamic-favicon"
      rel="icon"
      href="./images/transio_favicon_01.01.png"
    />
    <link rel="stylesheet" href="./css/global.css" />
    <link rel="stylesheet" href="./css/home-importer.css" />
    <link rel="stylesheet" href="./css/intro.css" />
    <link rel="stylesheet" href="./css/create-account.css" />
    <link rel="stylesheet" href="./css/log-in.css" />
  </head>

  <body class="intro-loader has-header home-page">
    <!-- POP-UP WINDOWS -->
    <div class="notice-overlay" id="postAuthOverlay" hidden>
      <div
        class="notice-modal"
        role="dialog"
        aria-modal="true"
        aria-labelledby="postAuthTitle"
        aria-describedby="postAuthDesc"
      >
        <img
          id="postAuthIcon"
          class="notice-illustration"
          src="./images/transio_image_03.01.png"
          alt=""
        />
        <h2 class="notice-title" id="postAuthTitle">Congrats!</h2>
        <p class="notice-desc" id="postAuthDesc">
          Your account is all set up. You can now access your
          <strong>personalized dashboard</strong> and
          <strong>all our features</strong>.
        </p>
        <button class="notice-cta" id="postAuthCta" type="button">
          Let‚Äôs Go
        </button>
      </div>
    </div>

    <!-- Loader kao na ostalim stranicama -->
    <div id="loading-screen">
      <div class="loader-content">
        <img
          class="loader-logotype"
          src="./images/transio_logotype_01.01.png"
          alt="Loading Logotype"
        />
        <div class="loader-line">
          <div class="loader-line-bg"></div>
          <div class="loader-line-progress"></div>
        </div>
      </div>
      <div class="loader-text">
        <span>Transio |</span
        ><span> Copyright ¬©Ô∏è 2025<br />All rights reserved.</span>
      </div>
    </div>

    <!-- Full-page blobovi (isti kontejner kao na intro-u) -->
    <div id="full-page-blob-container"></div>

    <!-- FIKSNI HEADER -->
    <header class="transio-header" role="banner">
      <div class="transio-header__inner">
        <a
          class="hdr-logo popfx"
          href="./home-importer.html"
          target="_blank"
          aria-label="Go to Home"
        >
          <img
            src="./images/transio_logotype_01.02.png"
            alt="Transio"
            class="hdr-logo__img"
            width="49.55"
            height="30"
          />
        </a>

        <!-- AKCIJE (tri dugmeta) -->
        <nav class="hdr-actions" aria-label="Header actions">
          <!-- Button 01: ikonica -->
          <button
            class="hdr-btn hdr-btn--icon popfx"
            id="activityBtn"
            type="button"
            aria-label="Activity"
          >
            <img
              src="./images/transio_icon_04.01.png"
              alt=""
              class="hdr-btn__icon"
            />
            <span id="notifBadge" class="hdr-badge" hidden>0</span>
          </button>

          <!-- Button 02: Profile -->
          <a
            class="hdr-btn hdr-btn--ghost popfx"
            href="account-importer.html"
            id="profileBtn"
            role="button"
            aria-label="Profile"
          >
            <span class="hdr-btn__text">Account</span>
          </a>

          <!-- Button 03: Log Out -->
          <button
            class="hdr-btn hdr-btn--primary popfx"
            id="logoutBtn"
            type="button"
            aria-label="Log Out"
          >
            <span class="hdr-btn__text hdr-btn__text--primary">Log Out</span>
          </button>
        </nav>
      </div>
    </header>

    <!-- Sadr≈æaj stranice -->
    <div class="page-container">
      <img
        src="./images/transio_logotype_01.02.png"
        alt=""
        class="decor-logo"
        aria-hidden="true"
      />

      <!-- HERO + SEARCH (centar strane) -->
      <section class="home-hero" role="search" aria-label="Search products">
        <div class="home-hero__inner">
          <h1 class="home-hero__title">
            Hello <span id="companyName">Importer</span> üëã
            <br />
            Find Your Next Shipment!
          </h1>

          <p class="home-hero__desc">
            Search through <strong>our product catalog</strong><br />and
            <strong>start importing today</strong>.
          </p>

          <form
            class="home-hero__form"
            action="./search.html"
            method="get"
            novalidate
          >
            <div class="input-wrapper">
              <input
                id="searchInput"
                name="q"
                type="search"
                inputmode="search"
                placeholder="Search products"
                aria-label="Search products"
                required
              />

              <!-- Hidden polje da znamo ≈°ta se pretra≈æuje -->
              <input
                type="hidden"
                name="type"
                id="searchType"
                value="products"
              />
            </div>
          </form>

          <!-- Toggle za tip pretrage -->
          <div
            class="search-toggle"
            role="group"
            aria-label="Select search type"
          >
            <button
              type="button"
              id="toggleProducts"
              class="hdr-btn hdr-btn--ghost hdr-btn--orange is-active"
              aria-pressed="true"
            >
              <span class="hdr-btn__text">Products</span>
            </button>

            <button
              type="button"
              id="toggleSuppliers"
              class="hdr-btn hdr-btn--ghost hdr-btn--orange"
              aria-pressed="false"
            >
              <span class="hdr-btn__text">Suppliers</span>
            </button>
          </div>
        </div>
      </section>

      <!-- SEARCH RESULTS (rendered via JS) -->
      <section
        id="searchResults"
        class="search-results"
        role="region"
        aria-live="polite"
        hidden
      >
        <div class="search-results__inner">
          <header class="search-results__head">
            <h2 class="search-results__title">Search results</h2>
            <div class="search-results__meta" id="resultsMeta"></div>
          </header>

          <div id="resultsGrid" class="results-grid" role="list"></div>

          <nav
            class="pagination"
            id="resultsPagination"
            aria-label="Search results pages"
            hidden
          >
            <button
              class="pg-btn pg-btn--prev"
              id="pgPrev"
              type="button"
              aria-label="Previous page"
            >
              ‚Äπ
            </button>
            <span class="pg-status" id="pgStatus" aria-live="polite"></span>
            <button
              class="pg-btn pg-btn--next"
              id="pgNext"
              type="button"
              aria-label="Next page"
            >
              ‚Ä∫
            </button>
          </nav>

          <div id="noResults" class="no-results" hidden>No results found.</div>
        </div>
      </section>
    </div>

    <!-- FOOTER (isti polo≈æaj kao na intro-u) -->
    <div class="intro-footer">
      <b>Transio</b> | Copyright ¬©Ô∏è 2025<br />All rights reserved.
    </div>

    <script src="./js/global.js" defer></script>

    <script>
      // Puni naziv kompanije u naslov (fallback: "Importer")
      (function () {
        var el = document.getElementById("companyName");
        if (!el) return;
        var name =
          (typeof localStorage !== "undefined" &&
            localStorage.getItem("importerCompany")) ||
          (typeof sessionStorage !== "undefined" &&
            sessionStorage.getItem("importerCompany")) ||
          "";
        el.textContent = name && name.trim() ? name.trim() : "Importer";
      })();
    </script>

    <!-- NOTIFICATION PANEL -->
    <div
      id="activityPanel"
      class="activity-panel"
      role="dialog"
      aria-modal="false"
      aria-labelledby="activityTitle"
      hidden
    >
      <div class="activity-panel__head">
        <h3 id="activityTitle" class="activity-panel__title">Notifications</h3>
        <div class="activity-panel__actions">
          <button id="markAllBtn" type="button" class="activity-mark">
            Mark all as read
          </button>
        </div>
      </div>

      <ul id="activityList" class="activity-list" role="list"></ul>
      <div id="activityEmpty" class="activity-empty" hidden>
        You're all caught up ‚ú®
      </div>
    </div>

    <script>
      (function notifGlow() {
        const move = (e) => {
          const el = e.currentTarget;
          const r = el.getBoundingClientRect();
          const p = e.touches ? e.touches[0] : e;
          el.style.setProperty("--mx", p.clientX - r.left + "px");
          el.style.setProperty("--my", p.clientY - r.top + "px");
        };

        // pozovi kad se DOM uƒçita i kad god re-renderuje≈° listu
        const bind = () => {
          document.querySelectorAll("#activityList .notif").forEach((el) => {
            el.addEventListener("mousemove", move, { passive: true });
            el.addEventListener("touchmove", move, { passive: true });
            el.addEventListener("mouseenter", move, { passive: true });
          });
        };

        // inicijalno vezivanje
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", bind);
        } else {
          bind();
        }

        // (opciono) ako dinamiƒçki puni≈° listu, pozovi: document.dispatchEvent(new Event('activity:rendered'))
        document.addEventListener("activity:rendered", bind);
      })();
    </script>

    <script>
      /* NOTIF ANIM ADD-ON: auto rebind bez menjanja postojeƒáeg koda */
      (function notifGlowObserver() {
        const list = document.getElementById("activityList");
        if (!list) return;

        // Emituj activity:rendered ƒçim se promene deca liste
        const fire = () =>
          document.dispatchEvent(new Event("activity:rendered"));

        // Prvo bindovanje ako je lista veƒá imala sadr≈æaj
        if (list.children.length) fire();

        const obs = new MutationObserver(() => {
          fire();
        });
        obs.observe(list, { childList: true, subtree: false });
      })();
    </script>
    <script src="./js/home-importer.js" defer></script>
    <script src="./js/intro.js" defer></script>
  </body>
</html>